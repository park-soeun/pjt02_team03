--- 
title: "Development Indicators by Continent"
author: "Gapminder Analytics Group"
format: 
    dashboard:
        theme: yeti
        orientation: rows
        expandable: true
        scrolling: true
--- 

# 1. ì†Œê°œ & ë°ì´í„° ì²˜ë¦¬ ê³¼ì •

```{python}
import pandas as pd
import plotly.express as px
our_df = pd.read_csv("../data/ames.csv")
```


![](img/us.png)

## 
ğŸ¯ ì•„ì´ì˜¤ì™€ ëŒ€í•™êµì— í•©ê²©í•œ ìš°ë¦¬! ì‰ì–´í•˜ìš°ìŠ¤ë¥¼ êµ¬í•˜ì!

- ğŸ“ **í•™êµ ê·¼ì²˜ì—¬ì•¼ í•¨(2km ì´ë‚´)**  
- ğŸ’° **ì›”ì„¸ëŠ” ì €ë ´í• ìˆ˜ë¡ ì¢‹ìŒ**  
- ğŸ›ï¸ **ë°©/ìš•ì‹¤ ìˆ˜ëŠ” 2ê°œ ì´ìƒ**  
- ğŸ”¥ **ì—ì–´ì»¨ / ë‚œë°©ì€ í•„ìˆ˜!**  
- ğŸ  **2ì¸µ ì´ìƒ / ë„“ì€ 1ì¸µ í•„ìš”**  
- ğŸ½ï¸ **ì£¼ë°© 1ê°œ ì´ìƒ & í€„ë¦¬í‹° ë³´í†µ ì´ìƒ**  
- ğŸš— **ì°¨ 1ëŒ€ ì´ìƒ ì£¼ì°¨ ê°€ëŠ¥**  
- ğŸ§± **ì§‘ ì»¨ë””ì…˜ì€ ë³´í†µ ì´ìƒ**  
- ğŸ›£ï¸ **ë„ë¡œëŠ” í¬ì¥ë˜ì–´ ìˆì–´ì•¼ í•¨**  
- ğŸï¸ **ğŸƒâ€â™€ï¸ ê³µì›ì´ ê°€ê¹Œì´ì— ìˆì–´ì•¼ í•¨**  



## 
âœ¨ ë°ì´í„° ì†Œê°œ

- **ë°ì´í„° ê±´ìˆ˜**: ì•½ 2500ê±´
- **ì»¬ëŸ¼ ìˆ˜**: ì•½ 85ê°œ
- **ì£¼ìš” ì»¬ëŸ¼**: `BedroomAbvGr`, `TotalFullBath`, `GarageCars`, `HouseStyle`, `KitchenQual`, `SalePrice` ë“±
- **ë¶„ì„ ëŒ€ìƒ**: ìœ í•™ìƒ ì‰ì–´í•˜ìš°ìŠ¤ë¥¼ ìœ„í•œ ì£¼íƒ ì¡°ê±´ ë¶„ì„



##
### ğŸš½ í™”ì¥ì‹¤ ìˆ˜ í†µí•©

- `FullBath`, `HalfBath`, `BsmtFullBath`, `BsmtHalfBath` â†’ `TotalFullBath`, `TotalHalfBath`
- `HalfBath`ëŠ” 0.5ê°œë¡œ ê°„ì£¼ (ì„¸ë©´ëŒ€ + ë³€ê¸°ë§Œ ìˆëŠ” êµ¬ì¡°)

```{python}
our_df["TotalFullBath"] = our_df["FullBath"] + our_df["BsmtFullBath"]
our_df["TotalHalfBath"] = 0.5 * (our_df["HalfBath"] + our_df["BsmtHalfBath"])
```


::: {.bath-style-grid}
<div class="grid">

<div class="item">
  <img src="img/halfbath.png" alt="1Story" />
</div>

<div class="item">
  <img src="img/fullbath.png" alt="1.5Fin" />
</div>

</div>
:::

<style>
.bath-style-grid .grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 20px;
  text-align: center;
}

.bath-style-grid .item img {
  width: 100%;
  height: auto;
  border-radius: 8px;
  box-shadow: 0 0 6px rgba(0,0,0,0.1);
}

.bath-style-grid .item p {
  margin-top: 8px;
  font-size: 0.9rem;
}
</style>


### ğŸ  HouseStyle ë‹¨ìˆœí™” (2ì¸µ ì—¬ë¶€ ê¸°ì¤€)

- 2ì¸µ ì´ìƒ êµ¬ì¡°ë¥¼ `Satisfied`, 1ì¸µì€ `Unsatisfied`, ë‚˜ë¨¸ì§€ëŠ” `Others`ë¡œ ë‹¨ìˆœí™”
- ì´ìœ : ê³µê°„ ë¶„ë¦¬ ë° ìœ í•™ìƒ ì„ í˜¸ êµ¬ì¡° ë°˜ì˜
- ì‹œê°ìë£Œ: ì•„ë˜ì— ì§‘ ìŠ¤íƒ€ì¼ë³„ ì´ë¯¸ì§€ í¬í•¨

```{python}
def classify_style(style):
    if style in ['1.5Fin', '2Story', '2.5Fin', '2.5Unf']:
        return 'Satisfied'
    elif style in ['1Story', '1.5Unf']:
        return 'Unsatisfied'
    else:
        return 'Others'

our_df["HouseStyleEval"] = our_df["HouseStyle"].apply(classify_style)
```

::: {.house-style-grid}
<div class="grid">

<div class="item">
  <img src="img/1story.png" alt="1Story" />
  <p><strong>1Story</strong><br>1ì¸µ êµ¬ì¡°</p>
</div>

<div class="item">
  <img src="img/1_5fin.png" alt="1.5Fin" />
  <p><strong>1.5Fin</strong><br>1.5ì¸µ, ìœ„ì¸µ ë§ˆê°</p>
</div>

<div class="item">
  <img src="img/1_5unf.png" alt="1.5Unf" />
  <p><strong>1.5Unf</strong><br>1.5ì¸µ, ìœ„ì¸µ ë¯¸ì™„ê³µ</p>
</div>

<div class="item">
  <img src="img/2story.png" alt="2Story" />
  <p><strong>2Story</strong><br>ì „í˜•ì ì¸ 2ì¸µ ì§‘</p>
</div>

<div class="item">
  <img src="img/2_5fin.png" alt="2.5Fin" />
  <p><strong>2.5Fin</strong><br>2.5ì¸µ, ë‹¤ë½ ë§ˆê°</p>
</div>

<div class="item">
  <img src="img/2_unf.png" alt="2.5Unf" />
  <p><strong>2.5Unf</strong><br>2.5ì¸µ, ë‹¤ë½ ë¯¸ì™„ê³µ</p>
</div>

<div class="item">
  <img src="img/sfoyer.png" alt="SFoyer" />
  <p><strong>SFoyer</strong><br>Split Foyer êµ¬ì¡°</p>
</div>

<div class="item">
  <img src="img/slvl.png" alt="SLvl" />
  <p><strong>SLvl</strong><br>Split Level êµ¬ì¡°</p>
</div>

</div>
:::

<style>
.house-style-grid .grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 20px;
  text-align: center;
}

.house-style-grid .item img {
  width: 100%;
  height: auto;
  border-radius: 8px;
  box-shadow: 0 0 6px rgba(0,0,0,0.1);
}

.house-style-grid .item p {
  margin-top: 8px;
  font-size: 0.9rem;
}
</style>

##
### 
ğŸ« í•™êµì™€ì˜ ê±°ë¦¬ ë³€ìˆ˜ ì¶”ê°€

- `Latitude`, `Longitude`ë¥¼ ì´ìš©í•´ **Iowa State University ì¤‘ì‹¬ê¹Œì§€ì˜ ê±°ë¦¬(`dist_to_ISU`)** ê³„ì‚°
- í•™ì—…/ìƒí™œì˜ í¸ì˜ì„±ì„ ê³ ë ¤í•´ ê±°ë¦¬ ê¸°ë°˜ ë³€ìˆ˜ ì¶”ê°€  
- í•´ë‹¹ ë³€ìˆ˜ëŠ” **ì£¼ê±°ì§€ ì„ íƒì— ìˆì–´ ì¤‘ìš”í•œ ì…ì§€ ìš”ì†Œ**ë¡œ í™œìš©ë  ìˆ˜ ìˆìŒ
- `dist_to_ISU`ëŠ” ê° ì£¼íƒì´ ISU ì¤‘ì‹¬ì—ì„œ **ëª‡ km ë–¨ì–´ì ¸ ìˆëŠ”ì§€ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ì—°ì†í˜• ë³€ìˆ˜**ë¡œ, í–¥í›„ ì£¼ê±° ì„ í˜¸ë„ ë¶„ì„ ë“±ì— í™œìš© ê°€ëŠ¥

```{python}
from geopy.distance import geodesic

isu_lat = 42.0267
isu_lon = -93.6465

import numpy as np

def haversine(lat1, lon1, lat2, lon2):
    R = 6371.0  # Earth radius in km
    phi1 = np.radians(lat1)
    phi2 = np.radians(lat2)
    delta_phi = np.radians(lat2 - lat1)
    delta_lambda = np.radians(lon2 - lon1)
    a = np.sin(delta_phi / 2.0) ** 2 + np.cos(phi1) * np.cos(phi2) * np.sin(delta_lambda / 2.0) ** 2
    c = 2 * np.arctan2(np.sqrt(a), np.sqrt(1 - a))
    return R * c * 1000  # return distance in meters

our_df['dist_to_ISU'] = our_df.apply(
    lambda row: haversine(row['Latitude'], row['Longitude'], isu_lat, isu_lon),
    axis=1
)

import seaborn as sns
import matplotlib.pyplot as plt

sns.histplot(our_df["dist_to_ISU"], kde=True)
plt.title("Distribution of Distance to ISU")
plt.xlabel("Distance to ISU (km)")
plt.ylabel("Count")
plt.show()
```






# 2. EDA

## ğŸ”¢ ë¬¸ìí˜• â†’ ìˆ«ìí˜• ì²˜ë¦¬

- `KitchenQual`, `HeatingQC`, `Street`, `CentralAir` ë“±
- ë²”ì£¼í˜• â†’ ë”ë¯¸ ë³€ìˆ˜ ë˜ëŠ” í‰ì¤€í™” ì²˜ë¦¬

```{python}
our_df = pd.get_dummies(our_df, columns=['KitchenQual', 'HeatingQC', 'Street', 'CentralAir'], drop_first=True)
```


## 
```{python}
import pandas as pd
import plotly.graph_objects as go

# ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°
our_df = pd.read_csv("../data/ames.csv")

# ì œì™¸í•˜ê³  ì‹¶ì€ ì»¬ëŸ¼
exclude_cols = ['Longitude', 'Latitude', 'dist_to_ISU', 'GarageArea', 'PID', 'SalePrice']

# ìˆ˜ì¹˜í˜• ë³€ìˆ˜ë§Œ ì¶”ì¶œ + ì œì™¸ ì»¬ëŸ¼ ì œê±°
numeric_cols = our_df.select_dtypes(include='number').columns.tolist()
numeric_cols = [col for col in numeric_cols if col not in exclude_cols]

# ê¸°ë³¸ ì„¤ì •
x_var = numeric_cols[0]
y_var = numeric_cols[1]

fig = go.Figure()

fig = fig.add_trace(
    go.Scatter(
        x=our_df[x_var],
        y=our_df[y_var],
        mode='markers',
        marker=dict(color='skyblue', size=8, line=dict(width=1, color='DarkSlateGrey')),
        text=our_df['HouseStyle'],
        name=f'{x_var} vs {y_var}'
    )
)

fig.update_layout(
    title='ğŸ¡ ì£¼ìš” ìˆ˜ì¹˜í˜• ë³€ìˆ˜ ê°„ ê´€ê³„ ì‹œê°í™”',
    template='plotly_white',
    width=750,
    height=600,
    xaxis_title=x_var,
    yaxis_title=y_var,
    margin=dict(t=100, b=180),
    updatemenus=[
        dict(
            buttons=[
                dict(label=col, method='update',
                     args=[{'x': [our_df[col]]}, {'xaxis.title': col}])
                for col in numeric_cols
            ],
            direction='down',
            showactive=True,
            x=0.2,
            xanchor='left',
            y=-0.3,
            yanchor='bottom'
        ),
        dict(
            buttons=[
                dict(label=col,
                     method='update',
                     args=[{'y': [our_df[col]]}, {'yaxis.title': col}])
                for col in numeric_cols
            ],
            direction='down',
            showactive=True,
            x=0.7,
            xanchor='left',
            y=-0.3,
            yanchor='bottom'
        )
    ],
    annotations=[
        dict(text="ğŸ“Œ X ë³€ìˆ˜ ì„ íƒ:", x=0.05, y=-0.28, xref="paper", yref="paper", showarrow=False),
        dict(text="ğŸ“Œ Y ë³€ìˆ˜ ì„ íƒ:", x=0.58, y=-0.28, xref="paper", yref="paper", showarrow=False)
    ]
)

```





# 3. íšŒê·€ë¶„ì„




# 4. ì§€ë„ ì‹œê°í™”




# 5. ìµœì¢… ë¶„ì„



